#include <iostream>
#include <vector>
#include <cstdlib>
#include <ctime>
#include <string>
#include <windows.h>
#include <mmsystem.h>
#include <chrono>
#include <thread>

using namespace std;

void clearScreen() {
#ifdef _WIN32
    system("cls");
#else
    system("clear");
#endif
}

vector<string> musicTracks = {
    "Mick Gordon - The Only Thing They Fear Is You (Remastered V2 Remix).wav",
    "Interstellar Main Theme - Hans Zimmer.wav",
    "M83 - Solitude (Tiktok Version).wav"
};
int currentTrackIndex = 0;

void playMusic() {
    string path = musicTracks[currentTrackIndex];
    PlaySound(TEXT(path.c_str()), NULL, SND_FILENAME | SND_ASYNC | SND_LOOP);
}

void stopMusic() {
    PlaySound(NULL, NULL, SND_FILENAME);
}

void switchMusicTrack() {
    currentTrackIndex = (currentTrackIndex + 1) % musicTracks.size();
    playMusic();
}

class GameObject {
public:
    int x, y;
    char symbol;
    GameObject(int x, int y, char symbol) : x(x), y(y), symbol(symbol) {}
};

class Player : public GameObject {
public:
    int health = 100;
    int score = 0;
    Player() : GameObject(5, 5, '@') {}

    void move(char direction) {
        switch (direction) {
            case 'w': y = max(0, y - 1); break;
            case 's': y = min(9, y + 1); break;
            case 'a': x = max(0, x - 1); break;
            case 'd': x = min(9, x + 1); break;
        }
    }

    void teleport() {
        x = rand() % 10;
        y = rand() % 10;
    }
};

class Enemy : public GameObject {
public:
    Enemy() : GameObject(rand() % 10, rand() % 10, 'E') {}
};

class Game {
    Player player;
    vector<Enemy> enemies;
    string playerName;
    bool gameRunning = true;

public:
    Game() : player(Player()) {
        srand(static_cast<unsigned int>(time(nullptr)));
        showUsernameEntryWindow();
        playMusic();
        spawnEnemies(5);
    }

    ~Game() {
        stopMusic();
    }

    void showUsernameEntryWindow() {
        clearScreen();
        cout << R"(
                   ___  ____       _______
|  \/  (_)     (_)  _  \
| .  . |_ _ __  _| | | |___   ___  _ __ ___
| |\/| | | '_ \| | | | / _ \ / _ \| '_ ` _ \
| |  | | | | | | | |/ / (_) | (_) | | | | | |
\_|  |_/_|_| |_|_|___/ \___/ \___/|_| |_| |_|
)";
        cout << R"(
+-------------------------------------+
|                                     |
|          Enter Username:            |
|                                     |
+-------------------------------------+
)" << '\n';
        cout << "                    ";
        getline(cin, playerName);
        clearScreen();
    }

    void run() {
        while (gameRunning) {
            clearScreen();
            display();
            if (checkLoseCondition()) {
                cout << "You've lost! Every pixel is filled with enemies.\n";
                gameRunning = false;
                break;
            }
            cout << "Move with WASD, 'q' to quit, 'm' to toggle music, 'n' for next track, 'l' for motivation. HP: " << player.health << ": ";
            handleInput();
        }
    }

private:
    void handleInput() {
        char action;
        cin >> action;
        cin.ignore(numeric_limits<streamsize>::max(), '\n');

        if (action == 'q') {
            gameRunning = false;
        } else if (action == 'm') {
            toggleMusic();
        } else if (action == 'n') {
            switchMusicTrack();
        } else if (action == 'l') {
            cout << "Don't give up, you got this!";
            this_thread::sleep_for(chrono::seconds(2));
        } else {
            player.move(action);
            checkForCombat();
        }
    }

    void spawnEnemies(int count) {
        for (int i = 0; i < count; ++i) {
            enemies.emplace_back(Enemy());
        }
    }

    void checkForCombat() {
        for (auto it = enemies.begin(); it != enemies.end(); ) {
            if (player.x == it->x && player.y == it->y) {
                it = enemies.erase(it);
                triggerCoinFlipCombat();
                spawnEnemies(1);
                return;
            } else {
                ++it;
            }
        }
    }

    void triggerCoinFlipCombat() {
        clearScreen();
        cout << "Encountered a Doom Monster!\n\n";
        cout << "\nChoose your fate: (h)eads or (t)ails? ";
        char choice;
        cin >> choice;
        bool playerChoice = (choice == 'h');

        vector<string> frames = {

            R"(
 .................................................................................................................
.................................................................................................................
..+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+..
..@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@..
..@@.........................................................................................................@@..
..@@.........................................................................................................@@..
..@@.............................................:*@@%=......................................................@@..
..@@.......................................:-*@@@@@@@@@@@@@@@#=::............................................@@..
..@@..................................:-*@@@@@@@@@@#+@@@@@@@@@@@@@@+::.......................................@@..
..@@...............................:+@@@@@@@@@@*+=-::::.:-+*%@@@@@@@@@#-:....................................@@..
..@@............................:-*@@@@@@%=:=+*****++++++*****+--*@@@@@@@+:..................................@@..
..@@...........................-#@@@@@+:-+****++++===--==++******+=--#@@@@@+:................................@@..
..@@.........................:*@@@@#--+**++=-:::::::...:::::::-=++***=:=@@@@@+:..............................@@..
..@@.......................:-%@@@*:-+**+-:::::.........:::::::::::-=+**=:-%@@@*:.............................@@..
..@@.......................-@@@%-:=**+:::.........................:::-+*+-:=@@@#-............................@@..
..@@......................-@@@*::=*+-:::.......:-=++++-:..::::::....:::-**=:-%@@#:...........................@@..
..@@.....................:#@@+::+*=::::......:::-=++++=:.:-=++=-.....::::+*=::#@@*:..........................@@..
..@@.....................+@@*::=*=:::.....:-+++--+=:-+=:.:=++==-.......:::+*=::%@@=..........................@@..
..@@....................:@@@::-*+:::......-+++++-+-:==-++++=:=+--::::...:::+*-.-@@%:.........................@@..
..@@....................-@@+.:=*-:........-++*+==+:-+:++++=::=++++=-:....::-*=:.#@@:.........................@@..
..@@....................=@@-.:++::........:=++=-+-:++-+++-.:=+=-::=-:.....::*+:.+@@-.........................@@..
..@@....................=@@-.:++::......:-=++=-++:-+=-==+=:-++++++=-:.....::++:.+@@-.........................@@..
..@@....................-@@=.:++::.....:-++++=-+=:+=-++**-:=+--::-::......::*+:.+@@-.........................@@..
..@@....................:@@#.:=*-::....:-++++==+:-*:+=++-::=++++=-:......::=*-:.%@@:.........................@@..
..@@....................:*@@=.:+*:::...::=++=-+-:++-++=-::=+=-::=-:.....:::*+:.-@@*:.........................@@..
..@@.....................-@@@-:-*+:::..:::::-++:=*=--=+-:-*+++++=-.....:::**-:-@@@-..........................@@..
..@@......................+@@@-:=*+-:::.....-++**+:::-+=-++:::::::...:::-**-:-@@@+...........................@@..
..@@......................:+@@@=:-+*=::::...:=++=-:::-=+++=:.......::::=*+-:=@@@*:...........................@@..
..@@.......................:+@@@#:-+**=-:::::::::::.:::-=-:......::::=**=::#@@@*:............................@@..
..@@........................:+@@@@#--+**+=-::::::...........::::::=+**+-:*@@@@+:.............................@@..
..@@..........................:*@@@@%=:=***++=-::::::::::::::-=++***+--#@@@@#-...............................@@..
..@@............................-#@@@@@%-:=*****+++++++++++++***++--#@@@@@#-.................................@@..
..@@.............................::*@@@@@@@%+--=+**********++-:+%@@@@@@@*-:..................................@@..
..@@.................................:*@@@@@@@@@@@@@@%%%@@@@@@@@@@@@@#-:.....................................@@..
..@@....................................:-*@@@@@@@@@@@@@@@@@@@@@@#=:.........................................@@..
..@@...........................................::=+#%@@@#*=::................................................@@..
..@@.........................................................................................................@@..
..@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@..
..+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+..
.................................................................................................................
.................................................................................................................
            )",


            R"(
   .................................................................................................................
.................................................................................................................
..+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+..
..@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@..
..@@.........................................................................................................@@..
..@@.........................................................................................................@@..
..@@.........................................................................................................@@..
..@@.........................................................................................................@@..
..@@......................................:+@@@@@#:..-#@#:...................................................@@..
..@@...................................:#@@@@*-=@%:.:=@+@-...................................................@@..
..@@................................:+@@@@-+@@@@@#:.:=%@%:...................................................@@..
..@@..............................:#@@@*#@@@@*:.....:-==-....................................................@@..
..@@............................:*@@@:@@@@=::::::::::........................................................@@..
..@@...........................=@@@*@@@*%@@@@@@@@@@@@@@%%#*=-::..............................................@@..
..@@.......................:-*@@@@+@+@@@@@@@@@@@@@@@@@@@@@@@@@@%#*=::........................................@@..
..@@...................:-*%@@@@@%+*%@@@%%%%######%%%%%@@@@@@@@@@@@@@@#+-:....................................@@..
..@@................:=#@@@@@@@@=#=**++===---------====+++**##%%@@@@@@@@@@#+::................................@@..
..@@..............:+%@@@@@@%#=++-:::.......::::::::::....:::-==+**#%@@@@@@@@%+-:.............................@@..
..@@............:=%@@@@%#*=----:..:--=++++++++++++++++++==-:::.:::-=+*##%@@@@@@#+:...........................@@..
..@@...........=%@@@@#+-:..:::-=+**++++++++++++++++++++++++++++=-::..::=+*#%@@@@@@*-.........................@@..
..@@.........:=@@@@*=:....:-+***+++=--::::.........:::::--==+++++++=-::..:-=*#%@@@@@*-:......................@@..
..@@........:+@@@#-:...:-=***+=-::::........................:::-=++++++=::..:-+*#@@@@@+-.....................@@..
..@@.......:+@@@+:....-=**+=:::...................................:-=++*++-::..:=+#@@@@@=:...................@@..
..@@.......=@@@=....:=**+-:::................:::::::::................:-++*+=::..:-*#@@@@*-..................@@..
..@@......:@@@=....:=*+-:::..............::::-=+++=-::::................::=+*+=::..:-+#@@@%=:................@@..
..@@......+@@+:...:=*=:::...........::::::::-=+*****+-::....::::::::......::-+*+-:...:=*@@@@=................@@..
..@@.....:%@@:...:=*+:::............:=+++=-::==:::-=+-::...:=++++=-:........::-+*+-:..:-*%@@@=...............@@..
..@@.....:@@*....:**:::............:=*****+-:==:..:+*-:::::=****++-:.........:::=*+-:..:-+%@@#:..............@@..
..@@.....:@@+....-*=::.............:==++=-===*=:.:=+-=++=-=+=:.:=+-:...........:.-**-:...:+%@@+..............@@..
..@@.....:@@+.:::=*=-:.............:=++++++:+=:.:=+-+*****+=:..-+=::::::::......::-*+-....-*@@%:.............@@..
..@@.....:@@#.:.:-*=-:...........:::::::--:++:.:-++-+++=:--:...-=++++++-::.......::-*=:...:-%@@=.............@@..
..@@.....:#@@-:::-*+:::........::=+++++=:-++-..-++--=+++=-...:==:-=***++-:........::+*-....:+@@+.............@@..
..@@......-@@%:..:+*::::.......:-=-=+*++-+*-:.-++-:::::++-..:=++++++++++-:........::-*=.....=@@*.............@@..
..@@......:*@@*:..-*+:-:.......:-+++++++-*=:.:=+:=+++++*=:.:=*=--=+++++-:.........:::*+.....=@@+.............@@..
..@@.......-%@@+..:=*+:::.......:-=+++=:++:.:=*==+=+***=:..:=+++=-::::::..........:::*+.....+@@-.............@@..
..@@........-@@@#:.:=#+::::..........:-++-.:-++:=++++-:....:-+****++-:............::=*=....:%@@:.............@@..
..@@.........-@@@@-::=**-:-::........:-+-::-++::-=++==:..-=++++=:=++-:...........:::**:....=@@*..............@@..
..@@..........:#@@@*::-*#+-:::::::...:-++++++-....:=*-:::+*+++++*+*+-:.........::::+*=:...-@@@-..............@@..
..@@...........:+@@@@+::=*#+-:::::....:-=+++-:....:=++=-=*=:.::-=++-:.........::-:+*=:...-@@@=...............@@..
..@@.............-#@@@@*--+**+=:::::::............:-+++++=:................:::::=**=:..:=@@@+................@@..
..@@..............:=%@@@@%-:+*#*+-:::::::...........::-=-:..............::::::=*#*-:..-%@@@+:................@@..
..@@................:-#@@@@@*--+***+=-:::::::::.....................:::::::-+***=:.:-#@@@@=..................@@..
..@@..................:-*@@@@@@#--+****++-:::--::::::::::::::::::::::::-=+***+=:.:=@@@@@+:...................@@..
..@@.....................:=#@@@@@@@*--+******++=--::::::::::::::--=++*****+=:.:+@@@@@@*:.....................@@..
..@@........................:=#@@@@@@@@%+:-+**************************+=-:-+%@@@@@@@+:.......................@@..
..@@...........................:-+%@@@@@@@@@@@#+-:-=++********++=-:-=*#@@@@@@@@@@+:..........................@@..
..@@...............................::=*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*-:.............................@@..
..@@....................................::-=*%@@@@@@@@@@@@@@@@@@@@@@@@@%+-:..................................@@..
..@@............................................::::--===+++===--:::.........................................@@..
..@@.........................................................................................................@@..
..@@.........................................................................................................@@..
..@@.........................................................................................................@@..
..@@.........................................................................................................@@..
..@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@..
..+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+..
.................................................................................................................
.................................................................................................................
            )",


            R"(
.................................................................................................................
.................................................................................................................
..+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+..
..@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@..
..@@.........................................................................................................@@..
..@@.........................................................................................................@@..
..@@.........................................................................................................@@..
..@@.........................................................................................................@@..
..@@.........................................................................................................@@..
..@@.....................::::::--------::::::::..............................................................@@..
..@@...............:=@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%#**+==--:::::.........................................@@..
..@@...............-%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%#+=-::................................@@..
..@@...............=@@**##*+-::::::--------==++***+*####%@@@@@@@@@@@@@@@@@@@@@@@+::..........................@@..
..@@...............+@#---=+++===--------::-=+***+=-----:--:::-===+++++*%@@@@@@@@@@=:.........................@@..
..@@...............=%@@@@#+==-------==-------=======+====+***+==--------::-=++-+@@#:.........................@@..
..@@...............-+%@@@@@@@@@@@@@%#++========----------------====-=====++*++++#@#:.........................@@..
..@@.................:::-+###%@@@@@@@@@@@@@@@@@@@@@@@%%##*++++===============+*%@@+..........................@@..
..@@......................:#%#:::-==+##%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*-..........................@@..
..@@......................:@@@*...........:::::::---===++**#%%%%%%%%%%%%%%%%%#*=-::..........................@@..
..@@......................:@@@@:......:-=-:..................................................................@@..
..@@.......................%@-@#:.....:%@@-..................................................................@@..
..@@.......................-@@@@*:....:@@@*..................................................................@@..
..@@.......................:*@@@@#:...-@@@@..................................................................@@..
..@@........................:%@@@@@-..:@@@@:.................................................................@@..
..@@.........................:#@@=@@=::@@%@=.................................................................@@..
..@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@..
..+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+..
.................................................................................................................
.................................................................................................................
            )",

            R"(
                .................................................................................................................
.................................................................................................................
..+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+..
..@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@..
..@@.........................................................................................................@@..
..@@.........................................................................................................@@..
..@@.............................................:*@@%=......................................................@@..
..@@.......................................:-*@@@@@@@@@@@@@@@#=::............................................@@..
..@@..................................:-*@@@@@@@@@@#+@@@@@@@@@@@@@@+::.......................................@@..
..@@...............................:+@@@@@@@@@@*+=-::::.:-+*%@@@@@@@@@#-:....................................@@..
..@@............................:-*@@@@@@%=:=+*****++++++*****+--*@@@@@@@+:..................................@@..
..@@...........................-#@@@@@+:-+****++++===--==++******+=--#@@@@@+:................................@@..
..@@.........................:*@@@@#--+**++=-:::::::...:::::::-=++***=:=@@@@@+:..............................@@..
..@@.......................:-%@@@*:-+**+-:::::.........:::::::::::-=+**=:-%@@@*:.............................@@..
..@@.......................-@@@%-:=**+:::.........................:::-+*+-:=@@@#-............................@@..
..@@......................-@@@*::=*+-:::.......:-=++++-:..::::::....:::-**=:-%@@#:...........................@@..
..@@.....................:#@@+::+*=::::......:::-=++++=:.:-=++=-.....::::+*=::#@@*:..........................@@..
..@@.....................+@@*::=*=:::.....:-+++--+=:-+=:.:=++==-.......:::+*=::%@@=..........................@@..
..@@....................:@@@::-*+:::......-+++++-+-:==-++++=:=+--::::...:::+*-.-@@%:.........................@@..
..@@....................-@@+.:=*-:........-++*+==+:-+:++++=::=++++=-:....::-*=:.#@@:.........................@@..
..@@....................=@@-.:++::........:=++=-+-:++-+++-.:=+=-::=-:.....::*+:.+@@-.........................@@..
..@@....................=@@-.:++::......:-=++=-++:-+=-==+=:-++++++=-:.....::++:.+@@-.........................@@..
..@@....................-@@=.:++::.....:-++++=-+=:+=-++**-:=+--::-::......::*+:.+@@-.........................@@..
..@@....................:@@#.:=*-::....:-++++==+:-*:+=++-::=++++=-:......::=*-:.%@@:.........................@@..
..@@....................:*@@=.:+*:::...::=++=-+-:++-++=-::=+=-::=-:.....:::*+:.-@@*:.........................@@..
..@@.....................-@@@-:-*+:::..:::::-++:=*=--=+-:-*+++++=-.....:::**-:-@@@-..........................@@..
..@@......................+@@@-:=*+-:::.....-++**+:::-+=-++:::::::...:::-**-:-@@@+...........................@@..
..@@......................:+@@@=:-+*=::::...:=++=-:::-=+++=:.......::::=*+-:=@@@*:...........................@@..
..@@.......................:+@@@#:-+**=-:::::::::::.:::-=-:......::::=**=::#@@@*:............................@@..
..@@........................:+@@@@#--+**+=-::::::...........::::::=+**+-:*@@@@+:.............................@@..
..@@..........................:*@@@@%=:=***++=-::::::::::::::-=++***+--#@@@@#-...............................@@..
..@@............................-#@@@@@%-:=*****+++++++++++++***++--#@@@@@#-.................................@@..
..@@.............................::*@@@@@@@%+--=+**********++-:+%@@@@@@@*-:..................................@@..
..@@.................................:*@@@@@@@@@@@@@@%%%@@@@@@@@@@@@@#-:.....................................@@..
..@@....................................:-*@@@@@@@@@@@@@@@@@@@@@@#=:.........................................@@..
..@@...........................................::=+#%@@@#*=::................................................@@..
..@@.........................................................................................................@@..
..@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@..
..+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+..
.................................................................................................................
.................................................................................................................
                    )",

        };

        for (auto& frame : frames) {
            clearScreen();
            cout << frame << endl;
            this_thread::sleep_for(chrono::milliseconds(500));
        }

        bool coinResult = rand() % 2;
        if (playerChoice == coinResult) {
            cout << "You won! Found a health potion(+5hp).\n";
            cout << "|-----|- - -|''''|''''|''''|''''|''''|''''\\|__\n";
            cout << "|-  - |  cc 6    5    4    3    2    1 ### __]==----------------------\n";
            cout << "|-----|____________________________________/|\n";
            player.score += 1;
            player.health += 5;
            cout << "Your score is now: " << player.score << "\n";
        } else {
            player.health -= 25;
            if (player.health > 0) {
                cout << "Monster celebrates! You lose 25hp health.\n";
    cout << "   ___,---.__          /'|`\\          __,---,___          \n";
cout << "    ,-'    \\`    `-.____,-'  |  `-.____,-'    //    `-.\n";
cout << "  ,'        |           ~'\\     /`~           |        `.\n";
cout << " /      ___//              `. ,'          ,  , \\___      \\\n";
cout << "|    ,-'   `-.__   _         |        ,    __,-'   `-.    |\n";
cout << "|   /          /\\_  `   .    |    ,      _/\\          \\   |\n";
cout << "\\  |           \\ \\`-.___ \\   |   / ___,-'/ /           |  /\n";
cout << " \\  \\           | `._   `\\\\  |  //'   _,' |           /  /\n";
cout << "  `-.\         /'  _ `---'' , . ``---' _  `\\         /,-'\n";
cout << "     ``       /     \\    ,='/ `\\=.    /     \\       ''\n";
cout << "             |__   /|\\_,--.,-.--,--._/|\\   __|\n";
cout << "             /  `./  \\\\`\\ |  |  | /,//' \\,'  \\\n";
cout << "       /   /     ||--+--|--+-/-|     \\   \\\n";
cout << "           |   |     /'\\_\\_\\ | /_/_/`\\     |   |\n";
cout << "            \\   \\__, \\_     `~'     _/ .__/   /\n";
cout << "             `-._,-'   `-._______,-'   `-._,-'\n";
                cout << "Remaining Health: " << player.health << "\n";




            } else {
                cout << "Defeat! You were slain by the monster.\n";
            }
        }
        cin.ignore(numeric_limits<streamsize>::max(), '\n');
        this_thread::sleep_for(chrono::seconds(2));
    }

    bool checkLoseCondition() {
        if (enemies.size() >= 100 || player.health <= 0) {
            cout << "Game Over.";
            if (player.health <= 0) cout << " You've run out of health.\n";
            else cout << " The world is overrun by enemies.\n";
            cout << "                                                                                                    \n";
cout << "                                                                                                    \n";
cout << "                                                                                                    \n";
cout << "                                                                                                    \n";
cout << "                                                                                                    \n";
cout << "                                                                                                    \n";
cout << "                                                                                                    \n";
cout << "                                                                                                    \n";
cout << "                                                                                                    \n";
cout << "                                                                                                    \n";
cout << "                                          .......                                                   \n";
cout << "                                         .*#-.:*+.                                                  \n";
cout << "                                        .-#:   .:+*-.                                               \n";
cout << "                 ..                     .-%:     ..:=+*=:.                                          \n";
cout << "                              .=**+-.    .**.         .:-=+=..                                     \n";
cout << "                            :+%*=:-+#=.   .-+++++=-:..    .:=+=:.                                   \n";
cout << "                           -#+:.   .-%*.        ..:-=++-.     .**.                                  \n";
cout << "                           **.      .*%-              .**:     =%:.                                 \n";
cout << "                           *=.      .=%=           ..-#%=.   .-%*.                                  \n";
cout << "                           :#:      .:%+     ....-*%%+.     .*%=.                                   \n";
cout << "                            :#.      .*+  .:*%@%*=:..      -%%:.                                    \n";
cout << "                             :*:.    .:#%#*=:..          -##-.                                      \n";
cout << "                              .#-       .             .=#*-.                                        \n";
cout << "                             .+%=                  .-**=..                                      .  \n";
cout << "                           .=%*-.                 :**:.                                             \n";
cout << "                         .-##-.                   .+*:                                              \n";
cout << "                        .*#=.                      :*+.                                             \n";
cout << "                      .-##:.     .                  :*+:                                            \n";
cout << "                      =#*:      -%:                  .**:                                           \n";
cout << "                     =#+:     .+%=%-                  .+#=.                                         \n";
cout << "                    :#*:     :##: :%=                  .-#+.                                        \n";
cout << "                    =%-.    -#*.   -%+.                  :#*.                                       \n";
cout << "                    +#:    -#*.    .-#+.                  :**:.                                     \n";
cout << "                    =#-    **.      ..#*.                  .-=++===--:..                           \n";
cout << "                    -#=.   ++.       .:%+.                        .:-=+*+=:.                       \n";
cout << "             .      .**:   :#:.       .-%*.                             .-#+.                      \n";
cout << "                     =#-.   +#.        .-%*.                              :#*.                     \n";
cout << "               .     .+*:   .#+.        .-%*:                             .-%+                     \n";
cout << "                      .*+.   :#+.        ..=%+.       .*#####%####*+:      .=#-                    \n";
cout << "                       -#=.   -%*.         .:*#-      .++.     ..:-=*#-     :*#:                   \n";
cout << "                        -#=.   .*#:          :*#-      .=+:          :#+.   .:#+.                  \n";
cout << "                         -#=.   -%*           :**:       =*:.        ..#*.   .-#+.                 \n";
cout << "                          :#+..=%*.            -#+.       +*:         .:#+.   .=#=.                \n";
cout << "         .                 .=*##-              .=#-       .#=.         .:#+.   .+#-..              \n";
cout << "                                               .-#-       .#*.          .:%+.   .-*%#*+=:.         \n";
cout << "                                               -#+.      .*%:.           .-%+         .-*+:        \n";
cout << "                   ..                        .=#=.      -#*:.             .-#+       .-*#-.        \n";
cout << "                                           .=#*:.     :+#=.                .-#=..:=*##+:.          \n";
cout << "                                         .=#*-.     :+*=.                   .:+*#*=-..             \n";
cout << "                                       .=#*-.     .=#+:                                             \n";
cout << "                                    .:+#*:      .=#+:                                               \n";
cout << "                                   :+%+.      .-**-.                                                \n";
cout << "                                  .%#.      .:*#-.                                                  \n";
cout << "                                   +%:.     :**.                                                    \n";
cout << "                                   .:#*:    .:*+.                                                   \n";
cout << "                                     .-%+.    .-*-                                                  \n";
cout << "                                      ..+#=.   :*+.                                                 \n";
cout << "                                        .:+*+--**-                                                  \n";
cout << "                                           .:-=:.                                                   \n";
cout << "                                                                                                    \n";
cout << "                                                                                                    \n";
cout << "                                                                                                    \n";
cout << "                                                                                                    \n";
cout << "                                    ______      __           _                                     \n";
cout << "|  _  \\    / _|         | |  \n";
cout << "| | | |___| |_ ___  __ _| |_ \n";
cout << "| | | / _ \\  _/ _ \\/ _` | __|\n";
cout << "| |/ /  __/ ||  __/ (_| | |_ \n";
cout << "|___/ \\___|_| \\___|\\__,_|__|\n";
cout << "                             \n";
            return true;
        }
        return false;
    }

    void display() {

        for (int i = 0; i < 10; i++) {
            for (int j = 0; j < 10; j++) {
                if (i == player.y && j == player.x) cout << player.symbol;
                else {
                    bool isEnemy = false;
                    for (const auto& enemy : enemies) {
                        if (i == enemy.y && j == enemy.x) {
                            cout << enemy.symbol;
                            isEnemy = true;
                            break;
                        }
                    }
                    if (!isEnemy) cout << ".";
                }
            }
            cout << endl;
        }
    }

    void toggleMusic() {
        static bool musicPlaying = true;
        if (musicPlaying) {
            stopMusic();
            musicPlaying = false;
        } else {
            playMusic();
            musicPlaying = true;
        }
    }
};

int main() {
    Game game;
    game.run();
    return 0;
}
